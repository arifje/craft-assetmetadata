{% import '_includes/forms' as forms %}

{{ forms.checkboxField({
    label: 'Set the “metadata” variable manually'|t,
    name: 'useCustomMetadataVar',
    checked: settings.useCustomMetadataVar,
    toggle: 'customMetadataVarContainer'
}) }}

<div id="customMetadataVarContainer" class="nested-fields{% if not settings.useCustomMetadataVar %} hidden{% endif %}">
    {{ forms.textField({
        label: 'Metadata Variable'|t,
        instructions: 'Define the “metadata” variable. You can include tags that output element properties, the element this field is added to is available via an “object” variable.'|t,
        id: 'customMetadataVar',
        name: 'customMetadataVar',
        class: 'code',
        value: settings.customMetadataVar,
    }) }}
</div>

{{ forms.editableTableField({
    label: 'Subfields'|t,
    instructions: 'Define the subfields and set how the auto-generated default values should look like. You can include tags that output element properties, the asset’s metadata is available via a “metadata” variable.'|t,
    id: 'subfields',
    name: 'subfields',
    addRowLabel: 'Add a subfield'|t,
    cols: {
        name: {
            heading: 'Name'|t,
            type: 'singleline',
            autopopulate: 'handle'
        },
        handle: {
            heading: 'Handle'|t,
            type: 'singleline',
            class: 'code'
        },
        defaultValue: {
            heading: 'Auto-generated Value'|t,
            type: 'singleline',
            class: 'code',
            width: '60%'
        }
    },
    rows: settings.subfields
}) }}

{{ forms.checkboxField({
    label: 'Show refresh button'|t,
    name: 'showRefreshButton',
    checked: settings.showRefreshButton,
}) }}

{{ forms.checkboxField({
    label: 'Make field read-only'|t,
    name: 'readonly',
    checked: settings.readonly,
}) }}

<div></div>

{{ forms.checkboxField({
    label: 'Auto-refresh field on every element save'|t,
    name: 'refreshOnElementSave',
    checked: settings.refreshOnElementSave,
}) }}
